[{"path":"https://omicseye.github.io/massSight/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to massSight","title":"Contributing to massSight","text":"outlines propose change massSight. detailed info contributing , tidyverse packages, please see development contributing guide.","code":""},{"path":"https://omicseye.github.io/massSight/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to massSight","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"https://omicseye.github.io/massSight/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to massSight","text":"want make bigger change, ’s good idea first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed).","code":""},{"path":"https://omicseye.github.io/massSight/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to massSight","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"omicsEye/massSight\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://omicseye.github.io/massSight/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to massSight","text":"New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"https://omicseye.github.io/massSight/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to massSight","text":"Please note massSight project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":"https://omicseye.github.io/massSight/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 massSight authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://omicseye.github.io/massSight/articles/example_alignment.html","id":"loading-data","dir":"Articles","previous_headings":"","what":"Loading Data","title":"Example Alignment","text":"begin loading massSight package alongside two dataframes containing data LC-MS experiments.","code":"library(massSight) #>  #> Attaching package: 'massSight' #> The following object is masked from 'package:stats': #>  #>     smooth data(\"hp1\") data(\"hp2\") head(hp1) |> kableExtra::kbl() head(hp2) |> kableExtra::kbl()"},{"path":"https://omicseye.github.io/massSight/articles/example_alignment.html","id":"creating-masssight-objects","dir":"Articles","previous_headings":"","what":"Creating massSight objects","title":"Example Alignment","text":"","code":"hp1_ms <- create_ms_obj(hp1,                         name = \"hp1\",                         annot = TRUE,                         id_name = \"Compound_ID\",                         rt_name = \"RT\",                         mz_name = \"MZ\",                         int_name = \"Intensity\",                         metab_name = \"Metabolite\",                         has_metadata = FALSE) hp2_ms <- create_ms_obj(hp2,                         name = \"hp2\",                         annot = TRUE,                         id_name = \"Compound_ID\",                         rt_name = \"RT\",                         mz_name = \"MZ\",                         int_name = \"Intensity\",                         metab_name = \"Metabolite\",                         has_metadata = FALSE)"},{"path":"https://omicseye.github.io/massSight/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Chiraag Gohel. Author, maintainer. Ali Rahnavard. Author.","code":""},{"path":"https://omicseye.github.io/massSight/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Gohel C, Rahnavard (2023). massSight: Batch Alignment Scaling LC-MS Data. https://github.com/omicsEye/massSight, https://omicseye.github.io/massSight/.","code":"@Manual{,   title = {massSight: Batch Alignment and Scaling for LC-MS Data},   author = {Chiraag Gohel and Ali Rahnavard},   year = {2023},   note = {https://github.com/omicsEye/massSight, https://omicseye.github.io/massSight/}, }"},{"path":"https://omicseye.github.io/massSight/index.html","id":"masssight","dir":"","previous_headings":"","what":"Batch Alignment and Scaling for LC-MS Data","title":"Batch Alignment and Scaling for LC-MS Data","text":"massSight R package alignment scaling LC-MS metabolomics data. Citation: use massSight, please cite manuscript: Chiraag Gohel Ali Rahnavard. (2023). massSight: Metabolomics meta-analysis multi-study data scaling, integration, harmonization. https://github.com/omicsEye/massSight","code":""},{"path":"https://omicseye.github.io/massSight/index.html","id":"contents","dir":"","previous_headings":"","what":"Contents","title":"Batch Alignment and Scaling for LC-MS Data","text":"Description Installation massSight Object Alignment Visualization Example real world applications Dev Instructions","code":""},{"path":[]},{"path":"https://omicseye.github.io/massSight/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Batch Alignment and Scaling for LC-MS Data","text":"","code":"devtools::install_github(\"omicsEye/massSight\")"},{"path":"https://omicseye.github.io/massSight/index.html","id":"data-preparation","dir":"","previous_headings":"","what":"Data Preparation","title":"Batch Alignment and Scaling for LC-MS Data","text":"massSight works output LC-MS experiments, contain columns corresponding : Compound ID Retention Time Mass Charge Ratio (Optional) Average Intensity across samples (Optional) Metabolite Name","code":""},{"path":"https://omicseye.github.io/massSight/index.html","id":"the-masssight-object","dir":"","previous_headings":"Data Preparation","what":"The massSight Object","title":"Batch Alignment and Scaling for LC-MS Data","text":"massSight creates uses MSObject class store data results pertaining individual LC-MS experiments. Prior alignment, LC-MS data frames tibbles converted MSObject using create_ms_obj: MSObject provides following functions: raw_df() access experiment’s raw LC-MS data isolated() access experiment’s isolated metabolites, important downstream alignment tasks scaled_df() access experiment’s scaled LC-MS data consolidated() access experiment’s consolidated data metadata() access experiment’s metadata","code":"ms1 <-   create_ms_obj(     df = hp1,     name = \"hp1\",     id_name = \"Compound_ID\",     rt_name = \"RT\",     mz_name = \"MZ\",     int_name = \"Intensity\"   )  ms2 <-   create_ms_obj(     df = hp2,     name = \"hp2\",     id_name = \"Compound_ID\",     rt_name = \"RT\",     mz_name = \"MZ\",     int_name = \"Intensity\"   ) ms2 |>   raw_df() |>   head() |>   kableExtra::kbl(format = \"simple\")"},{"path":"https://omicseye.github.io/massSight/index.html","id":"alignment","dir":"","previous_headings":"","what":"Alignment","title":"Batch Alignment and Scaling for LC-MS Data","text":"Alignment performed using auto_align() information auto_align() function can found package documentation","code":"aligned <- auto_align(ms1 = ms1,                        ms2 = ms2,                        iso_method = \"dbscan\")"},{"path":"https://omicseye.github.io/massSight/index.html","id":"plotting-results-from-alignment","dir":"","previous_headings":"Alignment","what":"Plotting results from alignment","title":"Batch Alignment and Scaling for LC-MS Data","text":"","code":"final_plots(aligned)"},{"path":[]},{"path":"https://omicseye.github.io/massSight/index.html","id":"run","dir":"","previous_headings":"","what":"Run","title":"Batch Alignment and Scaling for LC-MS Data","text":"now, manually add tsv/csv file load data object global environment using read_csv read_table. run auto_align created data objects.","code":"# read inputs as data frame in R user_df1 <- read.delim(   \"/path-to-file/profile1.tsv\",   sep = \"\\t\",   header = T,   fill = F,   comment.char = \"\",   check.names = F,   row.names = 1 )  user_df1 <- read.delim(   \"/path-to-file/profile2.tsv\",   sep = \"\\t\",   header = T,   fill = F,   comment.char = \"\",   check.names = F,   row.names = 1 )  # run alignment function to combine two datasets aligned <- auto_align(user_df1, user_df2)"},{"path":[]},{"path":"https://omicseye.github.io/massSight/index.html","id":"installation-1","dir":"","previous_headings":"Dev Instructions","what":"Installation","title":"Batch Alignment and Scaling for LC-MS Data","text":"Clone/pull massSight Open R project massSight.Rproj Build package using devtools::build() Install package using devtools::install()","code":""},{"path":"https://omicseye.github.io/massSight/reference/MSObject-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Class to represent mass spectroscopy data. — MSObject-class","title":"Class to represent mass spectroscopy data. — MSObject-class","text":"Class represent mass spectroscopy data.","code":""},{"path":"https://omicseye.github.io/massSight/reference/MSObject-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Class to represent mass spectroscopy data. — MSObject-class","text":"name character indicating name experiment. raw_df data frame containing raw data. isolated data frame containing isolated data. scaled_df data frame containing scaled data. consolidated logical indicating whether data consolidated. metadata data frame containing metadata.","code":""},{"path":"https://omicseye.github.io/massSight/reference/MergedMSObject-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Class to represent merged mass spectroscopy data. — MergedMSObject-class","title":"Class to represent merged mass spectroscopy data. — MergedMSObject-class","text":"Class represent merged mass spectroscopy data.","code":""},{"path":"https://omicseye.github.io/massSight/reference/MergedMSObject-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Class to represent merged mass spectroscopy data. — MergedMSObject-class","text":"ms1 character indicating name experiment. ms2 data frame containing raw data. all_matched data frame containing scaled data. iso_matched data frame containing scaled data. metadata logical indicating whether data consolidated. smooth string indicating smoothing method used.","code":""},{"path":"https://omicseye.github.io/massSight/reference/auto_align.html","id":null,"dir":"Reference","previous_headings":"","what":"Auto Align — auto_align","title":"Auto Align — auto_align","text":"function automatically align data based smoothing method choose.","code":""},{"path":"https://omicseye.github.io/massSight/reference/auto_align.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Auto Align — auto_align","text":"","code":"auto_align(   ms1,   ms2,   rt_lower = -0.5,   rt_upper = 0.5,   mz_lower = -15,   mz_upper = 15,   minimum_intensity = 1000,   iso_method = \"manual\",   eps = 1,   rt_iso_threshold = 0.5,   mz_iso_threshold = 5,   threshold = \"manual\",   match_method = \"unsupervised\",   smooth_method = \"loess\",   multipliers = c(6, 6, 6),   weights = c(1, 1, 1),   keep_features = c(F, F) )"},{"path":"https://omicseye.github.io/massSight/reference/auto_align.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Auto Align — auto_align","text":"ms1 massSight object representing results preprocessed LC-MS experiment. rt_lower numeric indicating lower bound RT range considered alignment. rt_upper numeric indicating upper bound RT range considered alignment. mz_lower numeric indicating lower bound m/z range considered alignment. mz_upper numeric indicating upper bound m/z range considered alignment. minimum_intensity numeric indicating minimum intensity considered alignment. rt_iso_threshold numeric indicating simplification parameter RT. mz_iso_threshold numeric indicating simplification parameter m/z. match_method character indicating initial matching method used detect inter-batch variability. Options \"unsupervised\" \"supervised\". smooth_method character indicating smoothing method used. Options \"lowess\", \"spline\", \"gaussian\". multipliers numeric vector indicating multipliers used alignment. weights numeric vector indicating weights used alignment. keep_features logical vector indicating whether keep features matched. df2 massSight object representing results second preprocessed LC-MS experiment.","code":""},{"path":"https://omicseye.github.io/massSight/reference/auto_align.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Auto Align — auto_align","text":"data frame containing aligned data.","code":""},{"path":"https://omicseye.github.io/massSight/reference/auto_scale.html","id":null,"dir":"Reference","previous_headings":"","what":"Auto Scale — auto_scale","title":"Auto Scale — auto_scale","text":"function automatically scale data based normalization method choose. also calculate CVs sample metabolite.","code":""},{"path":"https://omicseye.github.io/massSight/reference/auto_scale.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Auto Scale — auto_scale","text":"","code":"auto_scale(   is_to_use,   pref_to_use,   prefs_to_remove,   normalization,   data,   sample_information,   pool_missing_p,   fill_method,   smooth_method = \"lowess\" )"},{"path":"https://omicseye.github.io/massSight/reference/auto_scale.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Auto Scale — auto_scale","text":"is_to_use vector internal standards use normalization. want use internal standards, leave blank. pref_to_use string preferred reference use normalization. want use preferred reference, leave blank. prefs_to_remove vector preferred references remove data. want remove preferred references, leave blank. normalization string normalization method use. can \"\", \"NN\", \"SMOOTH\". data data frame data normalized. output read_data function. sample_information data frame sample information. output read_sample_information function. pool_missing_p boolean indicating whether pool missing values. TRUE, missing values pooled. FALSE, missing values filled half-minimum. fill_method string indicating fill missing values. can \"half-min\" \"mean\". \"half-min\", missing values filled half-minimum. \"mean\", missing values filled mean. smooth_method string indicating smoothing method use. can \"lowess\" \"loess\". \"lowess\", local polynomial regression used. \"loess\", local polynomial regression used.","code":""},{"path":"https://omicseye.github.io/massSight/reference/auto_scale.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Auto Scale — auto_scale","text":"data frame normalized data.","code":""},{"path":"https://omicseye.github.io/massSight/reference/cluster.html","id":null,"dir":"Reference","previous_headings":"","what":"Cluster — cluster","title":"Cluster — cluster","text":"function cluster data based clustering method choose.","code":""},{"path":"https://omicseye.github.io/massSight/reference/cluster.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cluster — cluster","text":"","code":"cluster()"},{"path":"https://omicseye.github.io/massSight/reference/consolidate.html","id":null,"dir":"Reference","previous_headings":"","what":"Consolidate — consolidate","title":"Consolidate — consolidate","text":"Consolidate adducts/isomers similar features one observation","code":""},{"path":"https://omicseye.github.io/massSight/reference/consolidate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Consolidate — consolidate","text":"","code":"consolidate(   ms_obj,   use_rt = T,   use_mz = T,   rt_threshold = NULL,   mz_threshold = NULL )"},{"path":"https://omicseye.github.io/massSight/reference/consolidate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Consolidate — consolidate","text":"ms_obj massSight object use_rt boolean retention time used identifying metabolites consolidated use_mz boolean mass charge ratio used identifying metabolites consolidated rt_threshold user defined retention time threshold defining adducts/isomers mz_threshold user defined mass charge ratio threshold defining adducts/isomers","code":""},{"path":"https://omicseye.github.io/massSight/reference/consolidate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Consolidate — consolidate","text":"massSight object consolidated metabolites","code":""},{"path":"https://omicseye.github.io/massSight/reference/create_ms_obj.html","id":null,"dir":"Reference","previous_headings":"","what":"Create MS Object — create_ms_obj","title":"Create MS Object — create_ms_obj","text":"Create MSObject data frame.","code":""},{"path":"https://omicseye.github.io/massSight/reference/create_ms_obj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create MS Object — create_ms_obj","text":"","code":"create_ms_obj(   df,   name,   annot = FALSE,   id_name = \"Compound_ID\",   rt_name = \"RT\",   mz_name = \"MZ\",   int_name = \"Intensity\",   metab_name = NULL,   has_metadata = FALSE )"},{"path":"https://omicseye.github.io/massSight/reference/create_ms_obj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create MS Object — create_ms_obj","text":"df data frame containing raw data. name character indicating name experiment. id_name character indicating name column containing compound IDs. rt_name character indicating name column containing retention times. mz_name character indicating name column containing m/z values. int_name character indicating name column containing intensities. has_metadata logical indicating whether data metadata.","code":""},{"path":"https://omicseye.github.io/massSight/reference/create_ms_obj.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create MS Object — create_ms_obj","text":"MSObject.","code":""},{"path":"https://omicseye.github.io/massSight/reference/distribution_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Distribution Plot — distribution_plot","title":"Distribution Plot — distribution_plot","text":"Plot distributions retention times mass charge ratios individual MS experiments","code":""},{"path":"https://omicseye.github.io/massSight/reference/distribution_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Distribution Plot — distribution_plot","text":"","code":"distribution_plot(ms_obj, subset = \"all\")"},{"path":"https://omicseye.github.io/massSight/reference/distribution_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Distribution Plot — distribution_plot","text":"ms_obj Either MSObject, MergedMSObject subset Whether plot metabolites isolated metabolites. Can either \"\" \"isolated\"","code":""},{"path":"https://omicseye.github.io/massSight/reference/distribution_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Distribution Plot — distribution_plot","text":"scatter plot retention times vs mass charge ratios marginal histograms","code":""},{"path":"https://omicseye.github.io/massSight/reference/distribution_plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Distribution Plot — distribution_plot","text":"","code":"aligned <- auto_align(ms1, ms2) #> Error in (function (classes, fdef, mtable) {    methods <- .findInheritedMethods(classes, fdef, mtable)    if (length(methods) == 1L)         return(methods[[1L]])    else if (length(methods) == 0L) {        cnames <- paste0(\"\\\"\", vapply(classes, as.character,             \"\"), \"\\\"\", collapse = \", \")        stop(gettextf(\"unable to find an inherited method for function %s for signature %s\",             sQuote(fdef@generic), sQuote(cnames)), domain = NA)    }    else stop(\"Internal error in finding inherited methods; didn't return a unique method\",         domain = NA)})(list(structure(\"nonstandardGenericFunction\", package = \"methods\")),     new(\"nonstandardGenericFunction\", .Data = function (x)     {        standardGeneric(\"raw_df\")    }, generic = structure(\"raw_df\", package = \"massSight\"),         package = \"massSight\", group = list(), valueClass = character(0),         signature = \"x\", default = NULL, skeleton = (function (x)         stop(gettextf(\"invalid call in method dispatch to '%s' (no default method)\",             \"raw_df\"), domain = NA))(x)), <environment>): unable to find an inherited method for function ‘raw_df’ for signature ‘\"nonstandardGenericFunction\"’ distribution_plot(aligned, subset = \"all\")"},{"path":"https://omicseye.github.io/massSight/reference/final_plots.html","id":null,"dir":"Reference","previous_headings":"","what":"Final Plots — final_plots","title":"Final Plots — final_plots","text":"Final Plots","code":""},{"path":"https://omicseye.github.io/massSight/reference/final_plots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Final Plots — final_plots","text":"","code":"final_plots(merged_ms_obj, rt_lim = c(-0.5, 0.5), mz_lim = c(-15, 15))"},{"path":"https://omicseye.github.io/massSight/reference/final_plots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Final Plots — final_plots","text":"merged_ms_obj Merged MS Object, typically result auto_align rt_lim RT bounds mz_lim MZ bounds","code":""},{"path":"https://omicseye.github.io/massSight/reference/final_plots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Final Plots — final_plots","text":"cowplot grid plots","code":""},{"path":"https://omicseye.github.io/massSight/reference/final_plots.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Final Plots — final_plots","text":"","code":"data(\"hp1_ms\") data(\"hp2_ms\") merged_ms_obj <- auto_align(hp1_ms, hp2_ms) #> Numbers of matched/kept features: 2459 final_plots(merged_ms_obj) #> `geom_smooth()` using formula = 'y ~ x' #> `geom_smooth()` using formula = 'y ~ x' #> `geom_smooth()` using formula = 'y ~ x' #> `geom_smooth()` using formula = 'y ~ x' #> `geom_smooth()` using formula = 'y ~ x' #> `geom_smooth()` using formula = 'y ~ x' #> Warning: Removed 675 rows containing non-finite values (`stat_smooth()`). #> Warning: Removed 675 rows containing missing values (`geom_point()`)."},{"path":"https://omicseye.github.io/massSight/reference/load_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Data — load_data","title":"Load Data — load_data","text":"function load LC-MS data file.","code":""},{"path":"https://omicseye.github.io/massSight/reference/load_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Data — load_data","text":"","code":"load_data(input, type = \"known\", sheet = 1, id = \"Metabolite\")"},{"path":"https://omicseye.github.io/massSight/reference/load_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Data — load_data","text":"input string file path data frame data loaded. type string indicating type data loaded. can \"known\" \"unknown\". sheet string integer indicating sheet number excel file loaded. id string indicating column name compound ID.","code":""},{"path":"https://omicseye.github.io/massSight/reference/load_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Data — load_data","text":"list sample metadata, feature metadata, data matrix.","code":""}]
